{"ast":null,"code":"import $api from \"../http\";\nimport UserStore from './../store/store';\nexport default class AuthService {\n  static async registration(mail, pass) {\n    await $api.post('auth/register', {\n      email: mail,\n      password: pass\n    }).then(function (response) {\n      return response;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n  static async login(mail, pass) {\n    let err = '';\n    await $api.post('auth/login', {\n      email: mail,\n      password: pass\n    }).then(function (response) {\n      UserStore.isAuthorized = true;\n      return;\n    }).catch(function (error) {\n      err = error;\n    });\n    if (err) {\n      switch (err.response.data.detail) {\n        case 'LOGIN_BAD_CREDENTIALS':\n          return 'Username or password are incorrect';\n        default:\n          return 'Connection error';\n      }\n    }\n  }\n  static async logout() {\n    await $api.post('auth/logout').then(function (response) {\n      console.log(response);\n    });\n  }\n  static async getprofile() {\n    let resp;\n    await $api.get('users/me').then(function (response) {\n      UserStore.isAuthorized = true;\n      UserStore.setUser(response.data);\n      resp = response.data;\n    }).catch(function (error) {\n      console.log(error);\n      resp = '';\n    });\n    return resp;\n  }\n  static async refresh() {\n    await $api.get('auth/refresh').then(function () {\n      UserStore.isAuthorized = true;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n}","map":{"version":3,"names":["$api","UserStore","AuthService","registration","mail","pass","post","email","password","then","response","catch","error","console","log","login","err","isAuthorized","data","detail","logout","getprofile","resp","get","setUser","refresh"],"sources":["C:/Users/Александр/Documents/Web/Mir 1/mir_frontend/src/services/userAuth.js"],"sourcesContent":["import $api from \"../http\";\r\nimport UserStore from './../store/store'\r\n\r\nexport default class AuthService\r\n{\r\n    static async registration(mail, pass)\r\n    {\r\n        await $api\r\n        .post('auth/register', {\r\n            email : mail,\r\n            password : pass\r\n        })\r\n        .then (function (response)\r\n        {\r\n            return response;\r\n        })\r\n        .catch (function (error) \r\n        {\r\n            console.log(error)\r\n        })\r\n    }\r\n    static async login(mail, pass)\r\n    {\r\n        let err = ''\r\n        await $api\r\n        .post('auth/login', {\r\n            email: mail,\r\n            password: pass\r\n        })\r\n        .then (function (response)\r\n        {\r\n            UserStore.isAuthorized = true;\r\n            return;\r\n        })\r\n        .catch (function (error) \r\n        {\r\n            err = error\r\n        })\r\n        if (err){\r\n            switch (err.response.data.detail)\r\n                {\r\n                    case ('LOGIN_BAD_CREDENTIALS'):\r\n                        return 'Username or password are incorrect'\r\n                    default:\r\n                        return 'Connection error'\r\n                }\r\n        }\r\n    }\r\n    static async logout()\r\n    {\r\n        await $api\r\n        .post('auth/logout')\r\n        .then(function(response)\r\n        {\r\n            console.log(response)\r\n        })\r\n    }\r\n    static async getprofile()\r\n    {\r\n        let resp;\r\n        await $api\r\n        .get('users/me')\r\n        .then (function (response)\r\n        {\r\n            UserStore.isAuthorized = true;\r\n            UserStore.setUser(response.data);\r\n            resp = response.data;\r\n        })\r\n        .catch (function (error) \r\n        {\r\n            console.log(error)\r\n            resp = ''\r\n        })\r\n        return resp\r\n    }\r\n    static async refresh()\r\n    {\r\n        await $api\r\n        .get('auth/refresh')\r\n        .then (function ()\r\n        {\r\n            UserStore.isAuthorized = true;\r\n        })\r\n        .catch (function (error) \r\n        {\r\n            console.log(error)\r\n        })\r\n    }\r\n}"],"mappings":"AAAA,OAAOA,IAAI,MAAM,SAAS;AAC1B,OAAOC,SAAS,MAAM,kBAAkB;AAExC,eAAe,MAAMC,WAAW,CAChC;EACI,aAAaC,YAAYA,CAACC,IAAI,EAAEC,IAAI,EACpC;IACI,MAAML,IAAI,CACTM,IAAI,CAAC,eAAe,EAAE;MACnBC,KAAK,EAAGH,IAAI;MACZI,QAAQ,EAAGH;IACf,CAAC,CAAC,CACDI,IAAI,CAAE,UAAUC,QAAQ,EACzB;MACI,OAAOA,QAAQ;IACnB,CAAC,CAAC,CACDC,KAAK,CAAE,UAAUC,KAAK,EACvB;MACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB,CAAC,CAAC;EACN;EACA,aAAaG,KAAKA,CAACX,IAAI,EAAEC,IAAI,EAC7B;IACI,IAAIW,GAAG,GAAG,EAAE;IACZ,MAAMhB,IAAI,CACTM,IAAI,CAAC,YAAY,EAAE;MAChBC,KAAK,EAAEH,IAAI;MACXI,QAAQ,EAAEH;IACd,CAAC,CAAC,CACDI,IAAI,CAAE,UAAUC,QAAQ,EACzB;MACIT,SAAS,CAACgB,YAAY,GAAG,IAAI;MAC7B;IACJ,CAAC,CAAC,CACDN,KAAK,CAAE,UAAUC,KAAK,EACvB;MACII,GAAG,GAAGJ,KAAK;IACf,CAAC,CAAC;IACF,IAAII,GAAG,EAAC;MACJ,QAAQA,GAAG,CAACN,QAAQ,CAACQ,IAAI,CAACC,MAAM;QAExB,KAAM,uBAAuB;UACzB,OAAO,oCAAoC;QAC/C;UACI,OAAO,kBAAkB;MACjC;IACR;EACJ;EACA,aAAaC,MAAMA,CAAA,EACnB;IACI,MAAMpB,IAAI,CACTM,IAAI,CAAC,aAAa,CAAC,CACnBG,IAAI,CAAC,UAASC,QAAQ,EACvB;MACIG,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;IACzB,CAAC,CAAC;EACN;EACA,aAAaW,UAAUA,CAAA,EACvB;IACI,IAAIC,IAAI;IACR,MAAMtB,IAAI,CACTuB,GAAG,CAAC,UAAU,CAAC,CACfd,IAAI,CAAE,UAAUC,QAAQ,EACzB;MACIT,SAAS,CAACgB,YAAY,GAAG,IAAI;MAC7BhB,SAAS,CAACuB,OAAO,CAACd,QAAQ,CAACQ,IAAI,CAAC;MAChCI,IAAI,GAAGZ,QAAQ,CAACQ,IAAI;IACxB,CAAC,CAAC,CACDP,KAAK,CAAE,UAAUC,KAAK,EACvB;MACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MAClBU,IAAI,GAAG,EAAE;IACb,CAAC,CAAC;IACF,OAAOA,IAAI;EACf;EACA,aAAaG,OAAOA,CAAA,EACpB;IACI,MAAMzB,IAAI,CACTuB,GAAG,CAAC,cAAc,CAAC,CACnBd,IAAI,CAAE,YACP;MACIR,SAAS,CAACgB,YAAY,GAAG,IAAI;IACjC,CAAC,CAAC,CACDN,KAAK,CAAE,UAAUC,KAAK,EACvB;MACIC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACtB,CAAC,CAAC;EACN;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}